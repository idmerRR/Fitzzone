<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ofertas - FITTZONE</title>
  <link rel="stylesheet" href="nuevo.css" />
</head>
<body>
  <header>
    <div class="logo">
      <a href="index.html"><img src="img/logo1.PNG" alt="Logo" /></a>
    </div>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="nuevo.html">Nuevo</a>
      <a href="hombre.html">Hombre</a>
      <a href="mujer.html">Mujer</a>
      <a href="accesorios.html">Accesorios</a>
      <a href="calzado.html">Calzado</a>
    </nav>
    <div class="icons">
      <a href="carrito.html" class="icono">🛒</a>
    </div>
  </header>

  <main>
    <h1>Ofertas especiales</h1>
    <div class="grid" id="productos-grid">
      <!-- Aquí se insertarán los productos dinámicamente -->
    </div>
  </main>

  <footer>
    <p>© 2025 FITTZONE GEAR. Todos los derechos reservados.</p>
  </footer>

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    const supabase = supabase.createClient(
      'https://jjxlaxzaivdfstfjpxmp.supabase.co', // 🔁 Reemplaza con tu URL
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpqeGxheHphaXZkZnN0ZmpweG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4MzY1MTMsImV4cCI6MjA2MzQxMjUxM30.gsqQOzqJLODXwOW6pjU1P3RgfKKFyPcZgxXRNBJH4ag'                    // 🔁 Reemplaza con tu anon public key
    );

    // Función para cargar productos desde Supabase
    async function cargarProductos() {
      const { data: productos, error } = await supabase
        .from('productos')
        .select('*')
        .limit(10); // Opcional

      if (error) {
        console.error('Error al cargar productos:', error);
        return;
      }

      const grid = document.getElementById('productos-grid');

      productos.forEach(producto => {
        const div = document.createElement('div');
        div.classList.add('producto');
        div.innerHTML = `
          <img src="${producto.imagen_url}" alt="${producto.nombre}">
          <h3>${producto.nombre}</h3>
          <p><strong>$${producto.precio}</strong></p>
          <button onclick='agregarAlCarrito(${JSON.stringify(producto)})'>Agregar al carrito</button>
        `;
        grid.appendChild(div);
      });
    }

    // Agregar producto al carrito (con ID real de Supabase)
    function agregarAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];

      const index = carrito.findIndex(p => p.id === producto.id);
      if (index !== -1) {
        carrito[index].cantidad += 1;
      } else {
        carrito.push({ ...producto, cantidad: 1 });
      }

      localStorage.setItem("carrito", JSON.stringify(carrito));
      alert(`✅ Producto agregado al carrito`);
    }

    // Cargar productos al iniciar
    cargarProductos();
  </script>
</body>
</html>
